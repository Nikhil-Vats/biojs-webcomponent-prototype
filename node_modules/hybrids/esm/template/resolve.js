var promiseMap = new WeakMap();
export default function resolve(promise, placeholder) {
  var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 200;
  return function (host, target) {
    var timeout;

    if (placeholder) {
      timeout = setTimeout(function () {
        timeout = undefined;
        requestAnimationFrame(function () {
          placeholder(host, target);
        });
      }, delay);
    }

    promiseMap.set(target, promise);
    promise.then(function (template) {
      if (timeout) clearTimeout(timeout);

      if (promiseMap.get(target) === promise) {
        template(host, target);
        promiseMap.set(target, null);
      }
    });
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZW1wbGF0ZS9yZXNvbHZlLmpzIl0sIm5hbWVzIjpbInByb21pc2VNYXAiLCJXZWFrTWFwIiwicmVzb2x2ZSIsInByb21pc2UiLCJwbGFjZWhvbGRlciIsImRlbGF5IiwiaG9zdCIsInRhcmdldCIsInRpbWVvdXQiLCJzZXRUaW1lb3V0IiwidW5kZWZpbmVkIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2V0IiwidGhlbiIsInRlbXBsYXRlIiwiY2xlYXJUaW1lb3V0IiwiZ2V0Il0sIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSxVQUFVLEdBQUcsSUFBSUMsT0FBSixFQUFuQjtBQUVBLGVBQWUsU0FBU0MsT0FBVCxDQUFpQkMsT0FBakIsRUFBMEJDLFdBQTFCLEVBQW9EO0FBQUEsTUFBYkMsS0FBYSx1RUFBTCxHQUFLO0FBQ2pFLFNBQU8sVUFBQ0MsSUFBRCxFQUFPQyxNQUFQLEVBQWtCO0FBQ3ZCLFFBQUlDLE9BQUo7O0FBRUEsUUFBSUosV0FBSixFQUFpQjtBQUNmSSxNQUFBQSxPQUFPLEdBQUdDLFVBQVUsQ0FBQyxZQUFNO0FBQ3pCRCxRQUFBQSxPQUFPLEdBQUdFLFNBQVY7QUFFQUMsUUFBQUEscUJBQXFCLENBQUMsWUFBTTtBQUMxQlAsVUFBQUEsV0FBVyxDQUFDRSxJQUFELEVBQU9DLE1BQVAsQ0FBWDtBQUNELFNBRm9CLENBQXJCO0FBR0QsT0FObUIsRUFNakJGLEtBTmlCLENBQXBCO0FBT0Q7O0FBRURMLElBQUFBLFVBQVUsQ0FBQ1ksR0FBWCxDQUFlTCxNQUFmLEVBQXVCSixPQUF2QjtBQUVBQSxJQUFBQSxPQUFPLENBQUNVLElBQVIsQ0FBYSxVQUFDQyxRQUFELEVBQWM7QUFDekIsVUFBSU4sT0FBSixFQUFhTyxZQUFZLENBQUNQLE9BQUQsQ0FBWjs7QUFFYixVQUFJUixVQUFVLENBQUNnQixHQUFYLENBQWVULE1BQWYsTUFBMkJKLE9BQS9CLEVBQXdDO0FBQ3RDVyxRQUFBQSxRQUFRLENBQUNSLElBQUQsRUFBT0MsTUFBUCxDQUFSO0FBQ0FQLFFBQUFBLFVBQVUsQ0FBQ1ksR0FBWCxDQUFlTCxNQUFmLEVBQXVCLElBQXZCO0FBQ0Q7QUFDRixLQVBEO0FBUUQsR0F2QkQ7QUF3QkQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwcm9taXNlTWFwID0gbmV3IFdlYWtNYXAoKTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVzb2x2ZShwcm9taXNlLCBwbGFjZWhvbGRlciwgZGVsYXkgPSAyMDApIHtcbiAgcmV0dXJuIChob3N0LCB0YXJnZXQpID0+IHtcbiAgICBsZXQgdGltZW91dDtcblxuICAgIGlmIChwbGFjZWhvbGRlcikge1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aW1lb3V0ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgcGxhY2Vob2xkZXIoaG9zdCwgdGFyZ2V0KTtcbiAgICAgICAgfSk7XG4gICAgICB9LCBkZWxheSk7XG4gICAgfVxuXG4gICAgcHJvbWlzZU1hcC5zZXQodGFyZ2V0LCBwcm9taXNlKTtcblxuICAgIHByb21pc2UudGhlbigodGVtcGxhdGUpID0+IHtcbiAgICAgIGlmICh0aW1lb3V0KSBjbGVhclRpbWVvdXQodGltZW91dCk7XG5cbiAgICAgIGlmIChwcm9taXNlTWFwLmdldCh0YXJnZXQpID09PSBwcm9taXNlKSB7XG4gICAgICAgIHRlbXBsYXRlKGhvc3QsIHRhcmdldCk7XG4gICAgICAgIHByb21pc2VNYXAuc2V0KHRhcmdldCwgbnVsbCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59XG4iXX0=