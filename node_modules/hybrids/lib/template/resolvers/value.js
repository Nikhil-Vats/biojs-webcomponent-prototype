"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = resolveValue;

var _utils = require("../utils");

var _array = _interopRequireDefault(require("./array"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function resolveValue(host, target, value) {
  var type = Array.isArray(value) ? 'array' : _typeof(value);

  var data = _utils.dataMap.get(target, {});

  if (data.type !== type) {
    (0, _utils.removeTemplate)(target);
    data = _utils.dataMap.set(target, {
      type: type
    });

    if (target.textContent !== '') {
      target.textContent = '';
    }
  }

  switch (type) {
    case 'function':
      value(host, target);
      break;

    case 'array':
      (0, _array.default)(host, target, value);
      break;

    default:
      target.textContent = type === 'number' || value ? value : '';
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90ZW1wbGF0ZS9yZXNvbHZlcnMvdmFsdWUuanMiXSwibmFtZXMiOlsicmVzb2x2ZVZhbHVlIiwiaG9zdCIsInRhcmdldCIsInZhbHVlIiwidHlwZSIsIkFycmF5IiwiaXNBcnJheSIsImRhdGEiLCJkYXRhTWFwIiwiZ2V0Iiwic2V0IiwidGV4dENvbnRlbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTs7Ozs7O0FBRWUsU0FBU0EsWUFBVCxDQUFzQkMsSUFBdEIsRUFBNEJDLE1BQTVCLEVBQW9DQyxLQUFwQyxFQUEyQztBQUN4RCxNQUFNQyxJQUFJLEdBQUdDLEtBQUssQ0FBQ0MsT0FBTixDQUFjSCxLQUFkLElBQXVCLE9BQXZCLFdBQXdDQSxLQUF4QyxDQUFiOztBQUNBLE1BQUlJLElBQUksR0FBR0MsZUFBUUMsR0FBUixDQUFZUCxNQUFaLEVBQW9CLEVBQXBCLENBQVg7O0FBRUEsTUFBSUssSUFBSSxDQUFDSCxJQUFMLEtBQWNBLElBQWxCLEVBQXdCO0FBQ3RCLCtCQUFlRixNQUFmO0FBQ0FLLElBQUFBLElBQUksR0FBR0MsZUFBUUUsR0FBUixDQUFZUixNQUFaLEVBQW9CO0FBQUVFLE1BQUFBLElBQUksRUFBSkE7QUFBRixLQUFwQixDQUFQOztBQUVBLFFBQUlGLE1BQU0sQ0FBQ1MsV0FBUCxLQUF1QixFQUEzQixFQUErQjtBQUM3QlQsTUFBQUEsTUFBTSxDQUFDUyxXQUFQLEdBQXFCLEVBQXJCO0FBQ0Q7QUFDRjs7QUFFRCxVQUFRUCxJQUFSO0FBQ0UsU0FBSyxVQUFMO0FBQ0VELE1BQUFBLEtBQUssQ0FBQ0YsSUFBRCxFQUFPQyxNQUFQLENBQUw7QUFDQTs7QUFDRixTQUFLLE9BQUw7QUFDRSwwQkFBYUQsSUFBYixFQUFtQkMsTUFBbkIsRUFBMkJDLEtBQTNCO0FBQ0E7O0FBQ0Y7QUFDRUQsTUFBQUEsTUFBTSxDQUFDUyxXQUFQLEdBQXFCUCxJQUFJLEtBQUssUUFBVCxJQUFxQkQsS0FBckIsR0FBNkJBLEtBQTdCLEdBQXFDLEVBQTFEO0FBUko7QUFVRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRhdGFNYXAsIHJlbW92ZVRlbXBsYXRlIH0gZnJvbSAnLi4vdXRpbHMnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1jeWNsZVxuaW1wb3J0IHJlc29sdmVBcnJheSBmcm9tICcuL2FycmF5JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVzb2x2ZVZhbHVlKGhvc3QsIHRhcmdldCwgdmFsdWUpIHtcbiAgY29uc3QgdHlwZSA9IEFycmF5LmlzQXJyYXkodmFsdWUpID8gJ2FycmF5JyA6IHR5cGVvZiB2YWx1ZTtcbiAgbGV0IGRhdGEgPSBkYXRhTWFwLmdldCh0YXJnZXQsIHt9KTtcblxuICBpZiAoZGF0YS50eXBlICE9PSB0eXBlKSB7XG4gICAgcmVtb3ZlVGVtcGxhdGUodGFyZ2V0KTtcbiAgICBkYXRhID0gZGF0YU1hcC5zZXQodGFyZ2V0LCB7IHR5cGUgfSk7XG5cbiAgICBpZiAodGFyZ2V0LnRleHRDb250ZW50ICE9PSAnJykge1xuICAgICAgdGFyZ2V0LnRleHRDb250ZW50ID0gJyc7XG4gICAgfVxuICB9XG5cbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgdmFsdWUoaG9zdCwgdGFyZ2V0KTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2FycmF5JzpcbiAgICAgIHJlc29sdmVBcnJheShob3N0LCB0YXJnZXQsIHZhbHVlKTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0YXJnZXQudGV4dENvbnRlbnQgPSB0eXBlID09PSAnbnVtYmVyJyB8fCB2YWx1ZSA/IHZhbHVlIDogJyc7XG4gIH1cbn1cbiJdfQ==