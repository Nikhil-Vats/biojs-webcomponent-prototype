"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getTemplateEnd = getTemplateEnd;
exports.removeTemplate = removeTemplate;
exports.dataMap = void 0;
var map = new WeakMap();
var dataMap = {
  get: function get(key, defaultValue) {
    if (map.has(key)) {
      return map.get(key);
    }

    if (defaultValue !== undefined) {
      map.set(key, defaultValue);
    }

    return defaultValue;
  },
  set: function set(key, value) {
    map.set(key, value);
    return value;
  }
};
exports.dataMap = dataMap;

function getTemplateEnd(node) {
  var data; // eslint-disable-next-line no-cond-assign

  while (node && (data = dataMap.get(node)) && data.endNode) {
    node = data.endNode;
  }

  return node;
}

function removeTemplate(target) {
  var data = dataMap.get(target);
  var startNode = data.startNode;

  if (startNode) {
    var endNode = getTemplateEnd(data.endNode);
    var node = startNode;
    var lastNextSibling = endNode.nextSibling;

    while (node) {
      var nextSibling = node.nextSibling;
      node.parentNode.removeChild(node);
      node = nextSibling !== lastNextSibling && nextSibling;
    }
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZW1wbGF0ZS91dGlscy5qcyJdLCJuYW1lcyI6WyJtYXAiLCJXZWFrTWFwIiwiZGF0YU1hcCIsImdldCIsImtleSIsImRlZmF1bHRWYWx1ZSIsImhhcyIsInVuZGVmaW5lZCIsInNldCIsInZhbHVlIiwiZ2V0VGVtcGxhdGVFbmQiLCJub2RlIiwiZGF0YSIsImVuZE5vZGUiLCJyZW1vdmVUZW1wbGF0ZSIsInRhcmdldCIsInN0YXJ0Tm9kZSIsImxhc3ROZXh0U2libGluZyIsIm5leHRTaWJsaW5nIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQU1BLEdBQUcsR0FBRyxJQUFJQyxPQUFKLEVBQVo7QUFDTyxJQUFNQyxPQUFPLEdBQUc7QUFDckJDLEVBQUFBLEdBRHFCLGVBQ2pCQyxHQURpQixFQUNaQyxZQURZLEVBQ0U7QUFDckIsUUFBSUwsR0FBRyxDQUFDTSxHQUFKLENBQVFGLEdBQVIsQ0FBSixFQUFrQjtBQUNoQixhQUFPSixHQUFHLENBQUNHLEdBQUosQ0FBUUMsR0FBUixDQUFQO0FBQ0Q7O0FBRUQsUUFBSUMsWUFBWSxLQUFLRSxTQUFyQixFQUFnQztBQUM5QlAsTUFBQUEsR0FBRyxDQUFDUSxHQUFKLENBQVFKLEdBQVIsRUFBYUMsWUFBYjtBQUNEOztBQUVELFdBQU9BLFlBQVA7QUFDRCxHQVhvQjtBQVlyQkcsRUFBQUEsR0FacUIsZUFZakJKLEdBWmlCLEVBWVpLLEtBWlksRUFZTDtBQUNkVCxJQUFBQSxHQUFHLENBQUNRLEdBQUosQ0FBUUosR0FBUixFQUFhSyxLQUFiO0FBQ0EsV0FBT0EsS0FBUDtBQUNEO0FBZm9CLENBQWhCOzs7QUFrQkEsU0FBU0MsY0FBVCxDQUF3QkMsSUFBeEIsRUFBOEI7QUFDbkMsTUFBSUMsSUFBSixDQURtQyxDQUVuQzs7QUFDQSxTQUFPRCxJQUFJLEtBQUtDLElBQUksR0FBR1YsT0FBTyxDQUFDQyxHQUFSLENBQVlRLElBQVosQ0FBWixDQUFKLElBQXNDQyxJQUFJLENBQUNDLE9BQWxELEVBQTJEO0FBQ3pERixJQUFBQSxJQUFJLEdBQUdDLElBQUksQ0FBQ0MsT0FBWjtBQUNEOztBQUVELFNBQU9GLElBQVA7QUFDRDs7QUFFTSxTQUFTRyxjQUFULENBQXdCQyxNQUF4QixFQUFnQztBQUNyQyxNQUFNSCxJQUFJLEdBQUdWLE9BQU8sQ0FBQ0MsR0FBUixDQUFZWSxNQUFaLENBQWI7QUFDQSxNQUFNQyxTQUFTLEdBQUdKLElBQUksQ0FBQ0ksU0FBdkI7O0FBRUEsTUFBSUEsU0FBSixFQUFlO0FBQ2IsUUFBTUgsT0FBTyxHQUFHSCxjQUFjLENBQUNFLElBQUksQ0FBQ0MsT0FBTixDQUE5QjtBQUVBLFFBQUlGLElBQUksR0FBR0ssU0FBWDtBQUNBLFFBQU1DLGVBQWUsR0FBR0osT0FBTyxDQUFDSyxXQUFoQzs7QUFFQSxXQUFPUCxJQUFQLEVBQWE7QUFDWCxVQUFNTyxXQUFXLEdBQUdQLElBQUksQ0FBQ08sV0FBekI7QUFDQVAsTUFBQUEsSUFBSSxDQUFDUSxVQUFMLENBQWdCQyxXQUFoQixDQUE0QlQsSUFBNUI7QUFDQUEsTUFBQUEsSUFBSSxHQUFHTyxXQUFXLEtBQUtELGVBQWhCLElBQW1DQyxXQUExQztBQUNEO0FBQ0Y7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1hcCA9IG5ldyBXZWFrTWFwKCk7XG5leHBvcnQgY29uc3QgZGF0YU1hcCA9IHtcbiAgZ2V0KGtleSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgaWYgKG1hcC5oYXMoa2V5KSkge1xuICAgICAgcmV0dXJuIG1hcC5nZXQoa2V5KTtcbiAgICB9XG5cbiAgICBpZiAoZGVmYXVsdFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG1hcC5zZXQoa2V5LCBkZWZhdWx0VmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gIH0sXG4gIHNldChrZXksIHZhbHVlKSB7XG4gICAgbWFwLnNldChrZXksIHZhbHVlKTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGVtcGxhdGVFbmQobm9kZSkge1xuICBsZXQgZGF0YTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbmQtYXNzaWduXG4gIHdoaWxlIChub2RlICYmIChkYXRhID0gZGF0YU1hcC5nZXQobm9kZSkpICYmIGRhdGEuZW5kTm9kZSkge1xuICAgIG5vZGUgPSBkYXRhLmVuZE5vZGU7XG4gIH1cblxuICByZXR1cm4gbm9kZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVRlbXBsYXRlKHRhcmdldCkge1xuICBjb25zdCBkYXRhID0gZGF0YU1hcC5nZXQodGFyZ2V0KTtcbiAgY29uc3Qgc3RhcnROb2RlID0gZGF0YS5zdGFydE5vZGU7XG5cbiAgaWYgKHN0YXJ0Tm9kZSkge1xuICAgIGNvbnN0IGVuZE5vZGUgPSBnZXRUZW1wbGF0ZUVuZChkYXRhLmVuZE5vZGUpO1xuXG4gICAgbGV0IG5vZGUgPSBzdGFydE5vZGU7XG4gICAgY29uc3QgbGFzdE5leHRTaWJsaW5nID0gZW5kTm9kZS5uZXh0U2libGluZztcblxuICAgIHdoaWxlIChub2RlKSB7XG4gICAgICBjb25zdCBuZXh0U2libGluZyA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICBub2RlID0gbmV4dFNpYmxpbmcgIT09IGxhc3ROZXh0U2libGluZyAmJiBuZXh0U2libGluZztcbiAgICB9XG4gIH1cbn1cbiJdfQ==